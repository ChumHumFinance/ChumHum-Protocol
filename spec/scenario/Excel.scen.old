-- Auto-generated tests from Excel

Test "Excel Scenario 1 https://docs.google.com/spreadsheets/d/14kRju5M3t0wL-OPSNPV-j1raXgArb0IdsL7hMqKQuyI/edit#gid=1178589286"
	-- Excel Base Setup
	SetOriginationFee "0"
	SetCollateralRatio "1.1"
	AddToken MATIC
	SupportMarket MATIC (FixedPrice 1.0) WhitepaperRate SimplePolicyHook
	AddToken OMG
	SupportMarket OMG (FixedPrice 0.05) WhitepaperRate SimplePolicyHook
	Approve Bank MATIC "1e30"
	Approve Bank OMG "1e30"
	Approve Geoff MATIC "1e30"
	Approve Geoff OMG "1e30"
	Approve Torrey MATIC "1e30"
	Approve Torrey OMG "1e30"
	Approve Robert MATIC "1e30"
	Approve Robert OMG "1e30"
	Faucet Bank MATIC "1e30"
	Faucet Bank OMG "1e30"
	Faucet Geoff MATIC "1e30"
	Faucet Geoff OMG "1e30"
	Faucet Torrey MATIC "1e30"
	Faucet Torrey OMG "1e30"
	Faucet Robert MATIC "1e30"
	Faucet Robert OMG "1e30"
	--
	-- Scenario 1
	Supply Bank MATIC "1000.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Bank MATIC) (Precisely "1000.00000000e18")
	Supply Bank OMG "3000.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Bank OMG) (Precisely "3000.00000000e18")
	FastForward 20 Blocks
	Supply Geoff MATIC "200.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Geoff MATIC) (Precisely "200.00000000e18")
	FastForward 10 Blocks
	EnterMarkets Geoff OMG
	Borrow Geoff OMG "2500.00000000e18"
	Assert Success
	Assert Equal (BorrowBalance Geoff OMG) (Precisely "2500.00000000e18")
	FastForward 10 Blocks
	Supply Torrey OMG "2500.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Torrey OMG) (Precisely "2500.00000000e18")
	FastForward 10 Blocks
	EnterMarkets Torrey MATIC
	Borrow Torrey MATIC "97.00000000e18"
	Assert Success
	Assert Equal (BorrowBalance Torrey MATIC) (Precisely "97.00000000e18")
	FastForward 10 Blocks
	Withdraw Bank MATIC "780.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Bank MATIC) (Precisely "220.00002988e18")
	FastForward 10 Blocks
	Withdraw Bank OMG "2000.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Bank OMG) (Precisely "1000.00900609e18")
	FastForward 10 Blocks
	Supply Robert OMG "5000.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Robert OMG) (Precisely "5000.00000000e18")
	FastForward 10 Blocks
	EnterMarkets Robert MATIC
	Borrow Robert MATIC "115.00000000e18"
	Assert Success
	Assert Equal (BorrowBalance Robert MATIC) (Precisely "115.00000000e18")
	FastForward 10 Blocks
	PayBorrow Geoff OMG "2000.00000000e18"
	Assert Success
	Assert Equal (BorrowBalance Geoff OMG) (Precisely "500.02288785e18")
	FastForward 10 Blocks
	Withdraw Geoff MATIC "30.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Geoff MATIC) (Precisely "170.00033682e18")
	FastForward 40 Blocks
	Withdraw Robert OMG "1000.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Robert OMG) (Precisely "4000.00277737e18")

Test "Excel Scenario 2 https://docs.google.com/spreadsheets/d/14kRju5M3t0wL-OPSNPV-j1raXgArb0IdsL7hMqKQuyI/edit#gid=585013245"
	-- Excel Base Setup
	SetOriginationFee "0"
	SetCollateralRatio "1.1"
	AddToken MATIC
	SupportMarket MATIC (FixedPrice 1.0) WhitepaperRate SimplePolicyHook
	AddToken OMG
	SupportMarket OMG (FixedPrice 0.05) WhitepaperRate SimplePolicyHook
	Approve Bank MATIC "1e30"
	Approve Bank OMG "1e30"
	Approve Geoff MATIC "1e30"
	Approve Geoff OMG "1e30"
	Approve Torrey MATIC "1e30"
	Approve Torrey OMG "1e30"
	Approve Robert MATIC "1e30"
	Approve Robert OMG "1e30"
	Faucet Bank MATIC "1e30"
	Faucet Bank OMG "1e30"
	Faucet Geoff MATIC "1e30"
	Faucet Geoff OMG "1e30"
	Faucet Torrey MATIC "1e30"
	Faucet Torrey OMG "1e30"
	Faucet Robert MATIC "1e30"
	Faucet Robert OMG "1e30"
	--
	-- Scenario 2
	Supply Geoff MATIC "1000.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Geoff MATIC) (Precisely "1000.00000000e18")
	EnterMarkets Geoff MATIC
	Borrow Geoff MATIC "310.00000000e18"
	Assert Success
	Assert Equal (BorrowBalance Geoff MATIC) (Precisely "310.00000000e18")
	FastForward 40 Blocks
	Supply Geoff MATIC "0.00000000e18"
	Assert Success
	Assert Equal (SupplyBalance Geoff MATIC) (Precisely "1000.00100590e18")
